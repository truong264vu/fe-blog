{"remainingRequest":"/home/ong-tru/Documents/MyBlog/fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ong-tru/Documents/MyBlog/fe/src/components/AdminPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ong-tru/Documents/MyBlog/fe/src/components/AdminPage.vue","mtime":1633102997622},{"path":"/home/ong-tru/Documents/MyBlog/fe/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ong-tru/Documents/MyBlog/fe/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ong-tru/Documents/MyBlog/fe/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ong-tru/Documents/MyBlog/fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgbmV0d29yayBmcm9tICcuLi9jb3JlL25ldHdvcmsnOwppbXBvcnQgeyBWdWVFZGl0b3IgfSBmcm9tICJ2dWUyLWVkaXRvciI7Ci8vIGltcG9ydCBuZXR3b3JrIGZyb20gJy4uL2NvcmUvbmV0d29yaycKZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czogewogICAgVnVlRWRpdG9yCiAgfSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcG9zdDogewogICAgICAgICAgICAgIGNvbnRlbnQ6ICIiLAogICAgICAgICAgICAgIHRpdGxlOiAiIiwKICAgICAgICAgICAgICBzeW5vcHNpczogIiIsCgogICAgICAgICAgfSwKICAgICAgICAgIHRhYmxlX2VkaXQ6IGZhbHNlLAogICAgICAgICAgdGFibGVfY3JlYXRlOiBmYWxzZSwKICAgICAgICAgIHRhYmxlOmZhbHNlLAogICAgICAgICAgbm90aWZpY2F0aW9uOiBmYWxzZSwKICAgICAgICAgIGlkX3Bvc3Q6ICcnLAogICAgICAgICAgZGF0YXM6IFtdLAogICAgICAgICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgICAgICAgdG90YWxQYWdlOiAwLAogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDptYXBTdGF0ZShbJ2FkbWluJ10pLAogICAgbW91bnRlZCgpIHsKICAgICAgdGhpcy5nZXRQYWdlQWRtaW4oKTsKICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICB9LAogICAgd2F0Y2g6ewogICAgICBkYXRhOiBmdW5jdGlvbigpewogICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICB9LAogICAgICBjdXJyZW50UGFnZTogZnVuY3Rpb24oKXsKICAgICAgICB0aGlzLmdldERhdGEoKTsKICAgICAgfQogICAgfSwKCiAgICBtZXRob2RzOiB7CiAgICAgICAgZ2V0UGFnZUFkbWluOiBmdW5jdGlvbigpewogICAgICAgICAgICBsZXQgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgICAgIGlmKHRva2VuICE9PSBudWxsICYmIHRoaXMuYWRtaW4gPT0gdHJ1ZSApewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ2FkbWluX3BhZ2UnfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdob21lJ30pOwoKICAgICAgICAgICAgfQoKICAgICAgfSwKICAgICAgZ2V0RGF0YTogZnVuY3Rpb24oKXsKICAgICAgICBuZXR3b3JrLmdldCgnYWRtaW4/cGFnZT0nICsgdGhpcy5jdXJyZW50UGFnZSkKICAgICAgICAudGhlbiggcmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLmRhdGFzID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgICB0aGlzLnRvdGFsUGFnZSA9IHJlc3BvbnNlLmRhdGEubGFzdF9wYWdlOwoKICAgICAgICB9KQogICAgICB9LAoKICAgICAgZGVsZXRlUG9zdDogZnVuY3Rpb24oaWQpewogICAgICAgIG5ldHdvcmsuZGVsZXRlKCdhZG1pbi8nICsgaWQpCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5kYXRhcyA9IHRoaXMuZGF0YXMuZmlsdGVyKGRhdGEgPT4gewogICAgICAgICAgICByZXR1cm4gZGF0YS5pZCAhPSBpZDsKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goIGVycm9yID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIH0pCiAgICAgIH0sCiAgICAgIGNyZWF0ZVBvc3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICBuZXR3b3JrLnBvc3QoJ2FkbWluJywgdGhpcy5wb3N0KQogICAgICAgICAgICAgICAgLnRoZW4oICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ2RhbmcgYmFpIHRoYW5oIGNvbmcnKTsKICAgICAgICAgICAgICAgIHRoaXMucG9zdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICBzeW5vcHNpczogJycsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKCBlcnJvciA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yczsKCiAgICAgICAgICAgICAgICB9KQogICAgICB9LAogICAgICBlZGl0UG9zdDogZnVuY3Rpb24oKXsKICAgICAgICBuZXR3b3JrLmdldCgnYWRtaW4vJyArIHRoaXMuaWRfcG9zdCArICcvZWRpdCcgKQogICAgICAgIC50aGVuKCByZXNwb25zZSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmlkX3Bvc3QpCiAgICAgICAgICB0aGlzLnBvc3QudGl0bGUgPSByZXNwb25zZS5kYXRhLnRpdGxlLAogICAgICAgICAgdGhpcy5wb3N0LmNvbnRlbnQgPSByZXNwb25zZS5kYXRhLmNvbnRlbnQsCiAgICAgICAgICB0aGlzLnBvc3Quc3lub3BzaXMgPSByZXNwb25zZS5kYXRhLnN5bm9wc2lzCiAgICAgICAgfSkKICAgICAgICAuY2FjdGgoIGVycm9yID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0pCiAgICAgIH0sCiAgICAgIHVwZGF0ZVBvc3Q6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBuZXR3b3JrLnB1dCgnYWRtaW4vJyArIHRoaXMuaWRfcG9zdCAsIHRoaXMucG9zdCkKICAgICAgICAgICAgICAgIC50aGVuKCAoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMucG9zdC50aXRsZSA9ICcnLAogICAgICAgICAgICAgICAgICB0aGlzLnBvc3QuY29udGVudCA9ICcnLAogICAgICAgICAgICAgICAgICB0aGlzLnBvc3Quc3lub3BzaXMgPSAnJyAKICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhY3RoKCAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2EnKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgIH0sCiAgICAgICAgY2xlYXJGb3JtKCl7CiAgICAgICAgICB0aGlzLnBvc3QudGl0bGUgPSAnJywKICAgICAgICAgIHRoaXMucG9zdC5jb250ZW50ID0gJycsCiAgICAgICAgICB0aGlzLnBvc3Quc3lub3BzaXM9ICcnCiAgICAgIH0KICAgIH0KICAgIAoKfQo="},{"version":3,"sources":["AdminPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA","file":"AdminPage.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\n \n  <div id=\"admin\">\n\n  <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\">\n\n  <div id=\"navbar\">\n    <div>\n          <input type=\"text\">\n          <button>search</button>\n    </div>\n    <div>\n          <input type=\"submit\" value=\"them bai viet\"  @click =\" table = true, table_create = !table_edit\">\n    </div>\n  </div>\n\n\n\n  <table class=\"table table-striped \">\n        <thead>\n          <tr>\n            <th scope=\"col\">stt</th>\n            <th scope=\"col\">id</th>\n            <th scope=\"col\">title</th>\n            <th scope=\"col\">synopsis</th>\n            <th scope=\"col\">content</th>\n            <th scope=\"col\">category</th>\n            <th scope=\"col\">tags</th>\n            <th scope=\"col\">thao tac</th>\n            \n          </tr>\n        </thead>\n        <tbody>\n            <tr v-for=\"data in datas\" :key=\"data.id\">\n              <th scope=\"row\">\n                  {{data.id}}\n              </th>\n              <th>\n                  {{data.title}}\n                  \n              </th>\n              <th>\n                  {{data.synopsis}}\n              </th>\n              <th >\n                  <p v-html=\"data.content\" id=\"content\">\n                    {{data.content}}\n                  </p>\n\n              </th>\n              <th >\n                <div v-for=\"category in data.categories\" :key=\"category.id\">\n                  {{category.name}}\n                </div>\n              </th>\n              <th >\n                <div v-for=\"tag in data.tags\" :key=\"tag.id\" scope=\"row\">\n                  <a href=\"#\">{{tag.name}}</a>\n                </div>\n              </th>\n              <th>\n                  <td @click=\"id_post = data.id , notification = true\" ><button>xoa</button></td>\n                  <td><button @click=\"id_post = data.id ,table = true, table_edit=true, editPost()\">Sua</button></td>\n              </th>\n            </tr>\n        </tbody>\n  </table>\n    <div  v-show=\"notification\" id=\"background-opacity-notification\">background-opacity-notification</div>\n    <div v-show=\"table_edit\" id=\"table_edit\">table_edit</div>\n    <div v-show=\"notification\" id=\"notification\">\n          <p>ban muon xoa bai viet co id la : {{id_post}} ?</p>\n          <button @click=\"deletePost(id_post)\">dung</button>\n          <button @click=\"notification = false\">khong</button>\n    </div>\n\n    <div>\n                    <button v-for=\"page in totalPage\" :key=\"page\" \n                    @click.prevent=\"currentPage = page \" \n                    >{{page}}</button> {{currentPage}}\n                  \n    </div>\n\n    <div id=\"form\" v-show=\"table\">\n        <div>\n          <h1 v-show=\"table_edit\">Chinh sua bai viet</h1>\n          <h1 v-show=\"table_create\">Them bai viet</h1>\n          <button @click=\"updatePost()\">luu thay doi</button>\n          <button @click=\"createPost()\">them bai viet</button>\n          <button @click=\"table = false , table_create= false , table_edit=false ,clearForm()\">dong</button>\n        </div>\n        <div>\n            <label for=\"title\">tieu de</label> <br>\n            <input type=\"text\" name=\"tieu de\" id=\"title\" v-model=\"post.title\">\n        </div>\n\n\n        <div>\n            <label for=\"synopsis\">tom tat noi dung</label> <br>\n            <input type=\"text\" name=\"synopsis\" id=\"synopsis\" v-model=\"post.synopsis\">\n        </div>\n\n        <div>\n            <label for=\"title\">thu muc</label><br>\n            <input type=\"text\" name=\"tieu de\" id=\"title\">\n        </div>\n\n        <div>\n            <label for=\"tag\">tags</label> <br>\n            <input type=\"text\" name=\"tag\" id=\"tag\">\n        </div> \n\n          <div>\n          <label for=\"content\">noi dung</label>\n          <vue-editor v-model=\"post.content\" name=\"content\" ></vue-editor>\n        </div>\n    </div>\n\n</div>\n</template>\n\n<script >\n\nimport { mapState } from 'vuex';\nimport network from '../core/network';\nimport { VueEditor } from \"vue2-editor\";\n// import network from '../core/network'\nexport default {\n    components: {\n    VueEditor\n  },\n    data(){\n        return {\n          post: {\n              content: \"\",\n              title: \"\",\n              synopsis: \"\",\n\n          },\n          table_edit: false,\n          table_create: false,\n          table:false,\n          notification: false,\n          id_post: '',\n          datas: [],\n            currentPage: 1,\n            totalPage: 0,\n        }\n    },\n    computed:mapState(['admin']),\n    mounted() {\n      this.getPageAdmin();\n      this.getData();\n    },\n    watch:{\n      data: function(){\n        this.getData();\n      },\n      currentPage: function(){\n        this.getData();\n      }\n    },\n\n    methods: {\n        getPageAdmin: function(){\n            let token = window.localStorage.getItem('token');\n            if(token !== null && this.admin == true ){\n            this.$router.push({name: 'admin_page'});\n            }\n            else{\n            this.$router.push({name: 'home'});\n\n            }\n\n      },\n      getData: function(){\n        network.get('admin?page=' + this.currentPage)\n        .then( response => {\n            this.datas = response.data.data;\n            this.totalPage = response.data.last_page;\n\n        })\n      },\n\n      deletePost: function(id){\n        network.delete('admin/' + id)\n        .then(() => {\n          this.datas = this.datas.filter(data => {\n            return data.id != id;\n          })\n        })\n        .catch( error => {\n          console.log(error)\n        })\n      },\n      createPost: function () {\n                 network.post('admin', this.post)\n                .then( () => {\n                     alert('dang bai thanh cong');\n                this.post = {\n                        title: '',\n                        synopsis: '',\n                        content: ''\n                    },\n                  location.reload();\n                })\n                .catch( error => {\n                    this.errors = error.response.data.errors;\n\n                })\n      },\n      editPost: function(){\n        network.get('admin/' + this.id_post + '/edit' )\n        .then( response => {\n          console.log(this.id_post)\n          this.post.title = response.data.title,\n          this.post.content = response.data.content,\n          this.post.synopsis = response.data.synopsis\n        })\n        .cacth( error => {\n            console.log(error);\n        })\n      },\n      updatePost: function() {\n            network.put('admin/' + this.id_post , this.post)\n                .then( () => {\n                  this.post.title = '',\n                  this.post.content = '',\n                  this.post.synopsis = '' \n                  location.reload();\n                })\n                .cacth( () => {\n                    console.log('a');\n                })\n      },\n        clearForm(){\n          this.post.title = '',\n          this.post.content = '',\n          this.post.synopsis= ''\n      }\n    }\n    \n\n}\n</script>\n<style scoped>\n    #admin {\n        padding: 200px 0px;\n        margin: 0px auto;\n        width: 60%;\n        text-align: center;\n       \n    }\n\n    #background-opacity-notification {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100vh;\n        opacity: 30%;\n        background: #1E1E1E;\n        \n    }\n    #table_edit{\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100vh;\n        opacity: 30%;\n        background: #1E1E1E;\n    }\n    #notification  {\n        height: 200px;\n        width: 700px;\n        background: #a89b9b;\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        color: white;\n        transform: translate(-50%, -50%);\n        border: 5px solid wheat;\n    }\n    #form {\n      width: 100%;\n      height:100vh;\n      background: white;\n      border: 1px solid black;\n      position: fixed;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      overflow: scroll;\n\n    }\n    tbody  tr  th  #content {\n      white-space: nowrap; \n      width: 100px; \n      height: 40px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n\n    }\n    tbody >  tr  th{\n      position: relative;\n    }\n    tbody  tr  th  #content::after {\n        content: '...';\n        position: absolute;\n        top: 12px;\n        right: 55px;\n        width: 20px;\n        height: 20px;\n    }\n\n\n</style>"]}]}