{"remainingRequest":"/home/ong-tru/Documents/MyBlog/fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ong-tru/Documents/MyBlog/fe/src/components/Post.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ong-tru/Documents/MyBlog/fe/src/components/Post.vue","mtime":1633938634028},{"path":"/home/ong-tru/Documents/MyBlog/fe/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ong-tru/Documents/MyBlog/fe/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ong-tru/Documents/MyBlog/fe/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ong-tru/Documents/MyBlog/fe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlICwgbWFwTXV0YXRpb25zfSBmcm9tICd2dWV4JwppbXBvcnQgbmV0d29yayBmcm9tICcuLi9jb3JlL25ldHdvcmsnCmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CgoKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm57CiAgICAgICAgICBkYXRhQ29tbWVudDogJycsCiAgICAgICAgICBjaGlsZF9jb21tZW50OiBbXSwKICAgICAgICAgIGNvbW1lbnRzOiB7CiAgICAgICAgICAgIGNvbnRlbnQ6ICcnLAogICAgICAgICAgICBwYXJlbnRfaWQ6ICcnLAogICAgICAgICAgICB1c2VyX2lkOiAnJywKICAgICAgICAgICAgcG9zdF9pZDogW10KICAgICAgICAgIH0sCiAgICAgICAgICBhZGRfY29tbWVudF9jaGlsZDogJycsCiAgICAgICAgICBuYW1lX2FjY291bnQ6ICcnLAogICAgICAgICAgcmVwbHk6ICcnLAogICAgICAgICAgY2hlY2tfbG9naW46IG51bGwsCiAgICAgICAgICBhdmF0YXI6ICcnLAogICAgICAgICAgbGlrZTogMCwKICAgICAgICAgIGFkbWluOiAnJwogICAgICAgIH0KICAgIH0sCgogICAgY29tcHV0ZWQ6IG1hcFN0YXRlKFsnUG9zdCcsJ2xvZ2luX3JlZ2lzdGVyX3RhYmxlJ10pLAogICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLmdldF9jb21tZW50KCk7CiAgICAgICAgdGhpcy5jb21tZW50cy51c2VyX2lkID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZCcpIDsgLy8gbGF5IHRlbiBuZ3VvaSBiaW5oIGx1YW4KICAgICAgICB0aGlzLm5hbWVfYWNjb3VudCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmFtZScpOyAvLyBsYXkgdGVuIG5ndW9pIGJsIGRlIGNoZWNrIGJsIGN1YSBuZ3VvaSBkbyAsIG5ldSBraGFjICA9PiBoaWRlCiAgICAgICAgdGhpcy5jaGVja19sb2dpbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgICAgICB0aGlzLmF2YXRhciA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXZhdGFyJyk7IC8vIHRoYXkgYXZhdGFyIGNobyBpbnB1dCBiaW5oIGx1YW4gCiAgICAgICAgdGhpcy5hZG1pbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncm9sZScpCiAgICB9ICwKICAgIHdhdGNoOiB7CiAgICAgICAgZGF0YUNvbW1lbnQ6IGZ1bmN0aW9uKCl7IC8vIGNhcCBuaGF0IGR1IGxpZXUgY29tbWVudAogICAgICAgICAgdGhpcy5nZXRfY29tbWVudCgpOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLi4ubWFwTXV0YXRpb25zKFsnU0lHTklOX1RBQkxFJ10pLAoKICAgICAgICBnZXRfY29tbWVudDogXy5kZWJvdW5jZShmdW5jdGlvbigpewogICAgICAgICAgdGhpcy5jb21tZW50cy5wb3N0X2lkID0gdGhpcy5Qb3N0LmlkOwogICAgICAgIG5ldHdvcmsuZ2V0KCdnZXRDb21tZW50JyAsIHRoaXMuY29tbWVudHMpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5kYXRhQ29tbWVudCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSk7CiAgICAgICAgfSwxMDAwKSwKCiAgICAgICAgYWRkX3BhcmVudF9jb21tZW50OiAgZnVuY3Rpb24oKXsKICAgICAgICAgIC8vIHRoaXMuY29tbWVudHMucGFyZW50X2lkID0gaWQ7CiAgICAgICAgICBuZXR3b3JrLnBvc3QoJ2NvbW1lbnQnICwgdGhpcy5jb21tZW50cykKICAgICAgICAgIC50aGVuKCAgICgpID0+IHsKICAgICAgICAgICAgdGhpcy5jb21tZW50cy5jb250ZW50ID0gJycKICAgICAgICAgIH0pCiAgICAgICAgfSwKCiAgICAgICAgYWRkX2NoaWxkX2NvbW1lbnQ6ICBmdW5jdGlvbihpZCl7IC8vIEtob25nIHZpZXQgY2h1bmcgMSBoYW0gdGFvIGNvbW1lbnQgPT4ga2hvbmcgIGJpIHRydW5nIHYtbW9kZWwKICAgICAgICAgIHRoaXMuY29tbWVudHMuY29udGVudCA9IHRoaXMuYWRkX2NvbW1lbnRfY2hpbGQgOwogICAgICAgICAgdGhpcy5jb21tZW50cy5wYXJlbnRfaWQgPSBpZDsKICAgICAgICAgIG5ldHdvcmsucG9zdCgnY29tbWVudCcgLCB0aGlzLmNvbW1lbnRzKQogICAgICAgICAgLnRoZW4oICAgKCkgPT4gewogICAgICAgICAgICB0aGlzLmNvbW1lbnRzLmNvbnRlbnQgPSAnJwogICAgICAgICAgICB0aGlzLmFkZF9jb21tZW50X2NoaWxkID0gJycKICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBkZWxldGVDb21tbmVudChpZCl7CiAgICAgICAgICAgIG5ldHdvcmsuZGVsZXRlKCdjb21tZW50LycgKyBpZCkKICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuZGF0YUNvbW1lbnQgPSB0aGlzLmRhdGFDb21tZW50LmZpbHRlcihkYXRhID0+IHsKICAgICAgICAgICAgICByZXR1cm4gZGF0YS5pZCAhPSBpZDsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuY29tbWVudHMucGFyZW50X2lkID0gaWQ7CiAgICAgICAgICAgIG5ldHdvcmsucG9zdCgnZGVzdHJveUNoaWxkQ29tbWVudCcgLCB0aGlzLmNvbW1lbnRzKQogICAgICAgICAgICAudGhlbiggKCkgPT4gewogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgICAvLyAgIGdvdG8ocmVmTmFtZSkgewogICAgICAgICAgLy8gICB2YXIgZWxlbWVudCA9IHRoaXMuJHJlZnNbcmVmTmFtZV07CiAgICAgICAgICAvLyAgIHZhciB0b3AgPSBlbGVtZW50Lm9mZnNldFRvcDsKCiAgICAgICAgICAvLyAgIHdpbmRvdy5zY3JvbGxUbygwLCB0b3ApOwogICAgICAgICAgLy8gfQogICAgfQp9Cg=="},{"version":3,"sources":["Post.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Post.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div id=\"post\">\n  <div id=\"main-content\">\n        <h1 >{{Post.title}}</h1> \n        <p>{{Post.short_content}}</p>\n        <p v-html=\"Post.content\">{{Post.content}}</p>  \n  </div>\n\n\n    <!-- parent commnet -->\n  <div class=\"comment-input open\">\n      <div>\n            <div id=\"avatar\">\n                <img :src=\"avatar\" alt=\"\">\n            </div>\n            <textarea v-show=\"check_login !== null \"  placeholder=\"nhập nội dung ...\" v-model=\"comments.content\"></textarea>\n            <button id=\"check-login\" v-show=\"check_login == null \" @click=\"SIGNIN_TABLE()\">Đăng nhập để bình luận</button>\n      </div>\n      <div id=\"operation\" style=\"margin-left : 68%;\">\n            <button @click=\"reply = false\" v-show=\"check_login !== null\">cancel</button>\n            <button v-show=\"check_login !== null \" @click=\"add_parent_comment()\">bình luận</button> \n      </div>\n  </div>\n<!-- hien thi commment  -->\n  <div id=\"show-comment\">\n        <div>\n            <div v-for=\"comment in dataComment\" :key=\"comment.id\" id=\"parent-comment\">\n                  <div id=\"avatar\">\n                      <img :src=\"comment.user.avatar\" alt=\"\">\n                  </div>\n                  <div >\n                      <span id=\"user-name\">{{comment.user.name}}</span> \n                      <p>{{comment.content}}</p>\n                  <div id=\"operation-comment\">\n                    <button>Thích</button>\n                    <button @click=\"reply = comment.id \">Bình luận</button>\n                    <button @click=\"deleteCommnent(comment.id)\" :class=\"{hide : comment.user.name != name_account}\">Xóa</button> \n                    <button v-show=\"admin == 'admin'\" \n                            @click=\"deleteCommnent(comment.id)\"\n                            style=\"background:  rgb(84, 84, 209);\n                                                color: white;\n                                                padding: 4px 6px;\n                                                border-radius: 6px;\" \n                             >Admin Xóa</button>\n                  </div>\n                            <div id=\"child-comment\" v-for=\"child in comment.child_comment\" :key=\"child.id\" >\n                                      <div id=\"avatar-comment\">\n                                        <div id=\"avatar\">\n                                        <img :src=\"child.user.avatar\" alt=\"\">\n                                        </div>\n                                        <div>\n                                          <span id=\"user-name\">{{child.user.name}}</span>\n                                          <p>{{child.content}}</p>\n                                        </div>\n                                      </div>\n                                  <div id=\"operation-comment\">\n                                        <button @click=\"like = true\" v-show=\"like == false\">Thích </button>\n                                        <button @click=\"like = false\" v-show=\"like\" style=\"color: blue;\">Thích  </button>\n                                        <button @click=\"reply = comment.id\" >Bình luận</button>\n                                        <button @click=\"deleteCommnent(child.id)\" \n                                                      :class=\"{hide : child.user.name != name_account}\" \n                                                      >\n                                                      Xóa\n                                                      </button> \n                                        <button v-show=\"admin == 'admin'\" \n                                                @click=\"deleteCommnent(child.id)\"\n                                                style=\"background:  rgb(84, 84, 209);\n                                                                    color: white;\n                                                                    padding: 4px 6px;\n                                                                    border-radius: 6px;\" \n                                                >Admin Xóa</button>\n                                 </div> \n                            </div>\n                    <!-- child comment  -->\n                  <div id=\"child-input\" :class=\"{open : reply == comment.id }\" class=\"comment-input \" >\n                          <div  >\n                                <div id=\"avatar\">\n                                    <img :src=\"avatar\" alt=\"\">\n                                </div>\n                                <textarea  placeholder=\"nhập nội dung ...\" v-model=\"add_comment_child\" v-show=\"check_login !== null\"></textarea>\n                                <button v-show=\"check_login == null \" @click=\"SIGNIN_TABLE()\">Đăng nhập để bình luận</button>\n                          </div>\n                          <div id=\"operation\">\n                                <button @click=\"reply = false\" v-show=\"check_login !== null\">cancel</button>\n                                <button @click=\"add_child_comment(comment.id) \" id=\"check-Login\" v-show=\"check_login !== null\">bình luận</button> \n                          </div>\n                  </div>\n                  </div>\n            </div>\n        </div>\n  </div>\n</div>\n\n  \n</template>\n\n<script>\nimport { mapState , mapMutations} from 'vuex'\nimport network from '../core/network'\nimport _ from 'lodash';\n\n\nexport default {\n    data() {\n        return{\n          dataComment: '',\n          child_comment: [],\n          comments: {\n            content: '',\n            parent_id: '',\n            user_id: '',\n            post_id: []\n          },\n          add_comment_child: '',\n          name_account: '',\n          reply: '',\n          check_login: null,\n          avatar: '',\n          like: 0,\n          admin: ''\n        }\n    },\n\n    computed: mapState(['Post','login_register_table']),\n    created() {\n        this.get_comment();\n        this.comments.user_id = window.localStorage.getItem('id') ; // lay ten nguoi binh luan\n        this.name_account = window.localStorage.getItem('name'); // lay ten nguoi bl de check bl cua nguoi do , neu khac  => hide\n        this.check_login = window.localStorage.getItem('token');\n        this.avatar = window.localStorage.getItem('avatar'); // thay avatar cho input binh luan \n        this.admin = window.localStorage.getItem('role')\n    } ,\n    watch: {\n        dataComment: function(){ // cap nhat du lieu comment\n          this.get_comment();\n        }\n    },\n    methods: {\n        ...mapMutations(['SIGNIN_TABLE']),\n\n        get_comment: _.debounce(function(){\n          this.comments.post_id = this.Post.id;\n        network.get('getComment' , this.comments)\n        .then(response => {\n          this.dataComment = response.data;\n        });\n        },1000),\n\n        add_parent_comment:  function(){\n          // this.comments.parent_id = id;\n          network.post('comment' , this.comments)\n          .then(   () => {\n            this.comments.content = ''\n          })\n        },\n\n        add_child_comment:  function(id){ // Khong viet chung 1 ham tao comment => khong  bi trung v-model\n          this.comments.content = this.add_comment_child ;\n          this.comments.parent_id = id;\n          network.post('comment' , this.comments)\n          .then(   () => {\n            this.comments.content = ''\n            this.add_comment_child = ''\n          })\n        },\n        deleteCommnent(id){\n            network.delete('comment/' + id)\n            .then(() => {\n              this.dataComment = this.dataComment.filter(data => {\n              return data.id != id;\n            })\n            });\n            this.comments.parent_id = id;\n            network.post('destroyChildComment' , this.comments)\n            .then( () => {\n            })\n        },\n          //   goto(refName) {\n          //   var element = this.$refs[refName];\n          //   var top = element.offsetTop;\n\n          //   window.scrollTo(0, top);\n          // }\n    }\n}\n</script>\n\n<style scoped>\n        #avatar img {\n            width: 40px;\n            height: 40px;\n            margin-top: 8px;\n            margin-right: 8px;\n        }\n       #post {\n        padding: 200px 0px;\n        width: 60%;\n        text-align: left;\n        margin: 0px auto;\n        }\n        \n        #post > #main-content h1 {\n          margin: 30px 0px;\n        }\n        #post > #main-content p {\n          margin: 30px 0px;\n        }\n\n        /* comment input  */\n        .comment-input > div {\n          display: flex;\n        }\n        .comment-input #avatar {\n          width: 40px;\n          height: 40px;\n          margin:0px 10px;\n          margin-top: -10px;\n        }\n        .comment-input {\n          padding-top: 30px;\n          width: 100%;\n          height: 140px;\n          background: rgb(243, 236, 236);\n          bottom: 0px;\n          margin: 20px auto;\n          display: none;\n        }\n        #child-input {\n          width: 600px;\n          margin: 10px 0px;\n        }\n\n        .comment-input div textarea {\n          height: 40px;\n          width: 80%;\n          border: 1px solid black;\n          border-radius: 4px;\n          padding: 0px 20px;\n          line-height: 40px;\n          outline: none;\n        }\n        .comment-input #operation { \n            /* position: absolute; */\n            /* right: 4; */\n            margin-top: 20px;\n            margin-left: 60%;\n        }\n        .comment-input #operation button {\n\n          background: rgb(84, 84, 209);\n          color: white;\n          padding: 4px 6px;\n          /* width: 200px; */\n          border-radius: 6px;\n          margin-left:20px;\n        }\n        #show-comment   #parent-comment {\n          display: flex;\n          margin: 20px;\n        }\n        \n        #show-comment  #user-name {  \n            color: black;\n            font-weight: 600;\n            font-size: 20px;\n        }\n        /* #show-comment #child-comment {\n          display: flex;\n        } */\n        #show-comment #child-comment #avatar-comment {\n            display: flex;\n        }\n        #show-comment #child-comment #avatar-comment div:nth-child(2) {\n            background: rgb(235, 233, 231);\n            padding: 0px 10px;\n            border-radius: 10px;\n        }\n        #show-comment  #operation-comment {\n          margin-bottom: 20px;\n        }\n        #show-comment #child-comment #operation-comment {\n          margin-left: 50px;\n        }\n        #show-comment  #operation-comment button {\n          color: rgb(101,103,107);\n          border: none;\n          margin: 0px 5px;\n          font-weight: 600;\n          background: white;\n        } \n        .hide {\n          display: none; \n        } \n        .open {\n          display: block;\n        }\n        #check-login {\n          padding: 2px 10px;\n        }\n        .active {\n          color: blue;\n        }\n\n\n\n        \n\n</style>"]}]}